<html>
	<head>
		<meta http-equiv="content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="content-Language" content="ja">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
		<script src="./js/jquery.easing.1.3.js"></script>
		<script src="./js/jquery.colorsConverter.js"></script>
		<title>日系颜色表</title>
		<link rel="stylesheet" href="./css/_libraries.css">
		<link rel="stylesheet" href="./css/color.css">
	</head>
	<body>
		
		<ul id="sidebar"></ul>

		<h1></h1>
		<p></p>

		<p class="rgb">
			<span class="r"></span>
			<span class="g"></span>
			<span class="g"></span>
		</p>

	<script type="text/javascript">

	jQuery(document).ready(function($){

		window.index=0;
		window.colors_scrollable = function(name,value,index){
			var data = $(document).data('colors');

			var name = name==undefined?data[window.index].name:name;
			var value = value==undefined?data[window.index].value:value;
			window.index = index==undefined?window.index:index;

			$('h1').text(name).next().text(value);
			$(document.body).css('background-color',value);

			var rgbColor = $.HextoRGB(value);
			var hsvColor = $.RGBtoHSV(rgbColor.r,rgbColor.g,rgbColor.b);
			if(hsvColor.v>50)
				$('h1,h1~p').css('color','#2e2e2e');

			window.index++
			if(window.index>=data.length)
				window.index=0;
		};

		$.ajax({
			url:'colors.xml',
			dataType:'xml',
			success:function(data,status){
				var data = data;
				for (var i = 0; i < data.length; i++) {
					$('<li></li>').css('background-color',data[i].value).attr({
						'data-name':data[i].name,
						'data-value':data[i].value,
						'data-index':i
					}).appendTo('#sidebar').click(function(){
						window.colors_scrollable($(this).attr('data-name'),$(this).attr('data-value'),$(this).attr('data-index'));
					});
				};

				$(document).data('colors',data);
				colors_scrollable();
				setInterval(window.colors_scrollable,3000);
			},
			dataFilter:function(data,type){
				var result = [];
				$(data).find('colors').children().each(function(i){
					var color = {
						name:$(this).attr('name'),
						value:$(this).attr('value')
					};
					result.push(color);
				});
				return result;
			}
		});

	});

	</script>

	</body>

</html>